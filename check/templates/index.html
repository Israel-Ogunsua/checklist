{% extends 'base.html' %}
{% block title%}
    Home | Welcome 
{% endblock %}

{% block content%}

<br>

<div class="container">
  <h2>Voice activation </h2>
  <p>Click on the button to toggle between showing and hiding content.</p>
  <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#demo">Learn How  to use </button>
  <div id="demo" class="collapse">
    <br>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
  </div>
</div>
<br>
<br>
 
<div class="chat-content" style="border-radius: 30px;">
  <div class="chat-header">
    <h2>New Chat Messages</h2>
  </div>

  

  <div class="chat-container">
    <div class="card flex-grow-1">
      <div class="card-body messages-box">
        
        <ul class="list-unstyled messages-list">
  
        
          <li class="message received">
            <div class="message-text">
              <div class="message-sender">
                <b>AI Response</b>
              </div>
              <div class="message-content">
                <b>Hey there! How can i help you today?</b>
              </div>
            </div>
          </li>

        </ul>
        
      </div>
     
    </div>

    <br>
    <form class="message-form">
      <div class="input-group">
        <input type="text" class="form-control message-input" placeholder="Type your message...">
        <div class="input-group-append">
          <button type="submit" class="btn btn-primary btn-send">Send</button>
        </div>
      </div>
    </form>

  
 

</div>
</div>




{% if current_user.is_authenticated %}
  <table>
    <tr>
      <th><i class="fa fa-trash-o" aria-hidden="true"></i> Delete  </th>
      <th> <i class="fa fa-info-circle" aria-hidden="true"></i> Title</th>
      <th> <i class="fa fa-exclamation" aria-hidden="true"></i> Discription </th>
      <th><i class="fa fa-star-half-o" aria-hidden="true"></i> Level</th>
      <th><i class="fa fa-times" aria-hidden="true"></i> Due time</th>
      <th> <i class="fa fa-archive" aria-hidden="true"></i> Achive</th>
      
    </tr>

    {% for todo in context %} 
        {% if todo %}
          {% for tod in todo %} 
            <tr>
              <br>
              <td> 
                <form action="{{ url_for('delete')}}" method="post">
                  <input type="text" name = 'delete' id  = 'delete' value={{tod.id}} style="display:none;">
                  <button type = 'submit'><a href="{{ url_for('delete')}}"> <i class="fa fa-trash-o" aria-hidden="true" style="color: red; font-size: 19px;border: 1px solid #dddddd; text-align: left;
                    padding: 8px;"></i></a> </button>
                </form></td>
              <td>{{tod.title}}</td>
              <td>{{tod.discription}}</td>
              <td>{{tod.status}}</td>
              <td>{{tod.Duetime}}</td>
              <td> 
                <form action="{{ url_for('achive')}}" method="post">
                  <input type="text" name = 'delete' id  = 'delete' value={{tod.id}} style="display:none;">
                  <input type="text" name = 'add' id  = 'add' value={{tod.title}} style="display:none;">
                  <input type="text" name = 'add_discription' id  = 'add_discription' value={{tod.discription}} style="display:none;">
                  <button type = 'submit'><a href="{{ url_for('achive')}}"><i class="fa fa-check" aria-hidden="true" style="background-color: rgb(163, 189, 163); border-radius:7px; font-size: 19px; border: 1px solid #dddddd; text-align: left;
                    padding: 8px;"></i></a>
                    </button>
                </form></td>
              
            </tr>
          {% endfor%}
        {%else%}
          <center><h6> Nothing on your search List!! </h6></center>
        {%endif%}
    {% endfor%}
  </table>
  {% endif %}

  <br>
 
  
  <style>
    .messages-box {
     flex: 1;
     overflow-y: auto;
   }

   .messages-list {
     padding-left: 0;
   }

   .message {
     margin-bottom: 15px;
     list-style: none;
   }

   .message-text {
     padding: 10px;
     border-radius: 5px;
   }

   .sent {
     background-color: #dcf8c6;
     align-self: flex-end;
   }

   .received {
     background-color: #f1f0f0;
     align-self: flex-start;
   }

   .message-form {
     border-radius: 20px;
     padding: 10px;
     background-color: #f8f9fa;
   }

   .message-input {
     flex: 1;
     border-radius: 0;
     border-right: none;
   }

   .btn-send {
     border-radius: 0;
   }

   .chat-container {
     height: 100%;
     display: flex;
     flex-direction: column;
   }
   body {
     font-family: Arial, sans-serif;
     margin: 0;
     padding: 0;
     background-color: #fcf6f6;
  
   }

   .chat-interface {
     display: flex;
   }

   .sidebar {
     width: 300px;
     padding: 20px;
     background-color: rgb(61, 60, 60);
   }

   .voice-box {
     display: flex;
     align-items: center;
     margin-bottom: 20px;
   }

   .voice-circle {
     width: 60px;
     height: 60px;
     background-color: rgb(208, 208, 213);
     border-radius: 50%;
     display: flex;
     justify-content: center;
     align-items: center;
   }

   .mic-logo {
     width: 30px;
     height: 30px;
     background-color: #777;
     border-radius: 50%;
   }

   .voice-text {
     font-size: 18px;
     margin-left: 10px;
     color: #fff;
   }

   .youtube-video {
     margin-top: 20px;
   }

   .chat-content {
     flex-grow: 1;
     padding: 20px;
     background-color: #333;
     overflow-y: auto; /* Add this line to make it scrollable */
   }

   .chat-header {
     padding-bottom: 10px;
     border-bottom: 1px solid #555;
   }

   .chat-header h2 {
     font-size: 24px;
     color: #fff;
     margin: 0;
   }

   .chat-messages {
     margin-top: 20px;
   }

   .chat-input {
     margin-top: 20px;
     display: flex;
   }

   .chat-input input[type="text"] {
     flex-grow: 1;
     padding: 10px;
     font-size: 16px;
     border: none;
     border-radius: 5px;
     background-color: #555;
     color: #fff;
   }

   .chat-input button {
     padding: 10px 20px;
     font-size: 16px;
     border: none;
     border-radius: 5px;
     background-color: #2a4792;
     color: #fff;
     margin-left: 10px;
     cursor: pointer;
   }
   .message-input {
   border-radius: 20px;
 }

 /* Add border radius to the btn-send class (submit button) */
 .btn-send {
   border-radius: 20px;
 }

 </style>


    <style> 
        table {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }
        td {
          border: 1px dotted rgb(192, 188, 188);
        }

        tr:nth-child(even) {
          background-color: #dddddd;
        }

        th {
          background-color :beige;
        }
        
        .tm{
           font-size:large;
         }

         
          .button {
              border-radius: 30px;
              color: white;
              padding: 5px 12px;
              text-align: center;
              text-decoration: none;
              display: inline-block;
              font-size: 13px;
              cursor: pointer;
              width: 100%;
              background-color: green;

          }
            .edit_table{
              border-radius: 30px;
            }

            * {box-sizing: border-box}
            body {font-family: Verdana, sans-serif; margin:0}
            .mySlides {display: none}
            img {vertical-align: middle;}
            
            /* Slideshow container */
            .slideshow-container {
              max-width: 1000px;
              position: relative;
              margin: auto;
            }
            
            /* Next & previous buttons */
            .prev, .next {
              cursor: pointer;
              position: absolute;
              top: 50%;
              width: auto;
              padding: 16px;
              margin-top: -22px;
              color: white;
              font-weight: bold;
              font-size: 18px;
              transition: 0.6s ease;
              border-radius: 0 3px 3px 0;
              user-select: none;
            }
            
            /* Position the "next button" to the right */
            .next {
              right: 0;
              border-radius: 3px 0 0 3px;
            }
            
            /* On hover, add a black background color with a little bit see-through */
            .prev:hover, .next:hover {
              background-color: rgba(0,0,0,0.8);
            }
            
            /* Caption text */
            .text {
              color: #f2f2f2;
              font-size: 15px;
              padding: 8px 12px;
              position: absolute;
              bottom: 8px;
              width: 100%;
              text-align: center;
            }
            
            /* Number text (1/3 etc) */
            .numbertext {
              color: #f2f2f2;
              font-size: 12px;
              padding: 8px 12px;
              position: absolute;
              top: 0;
            }
            
            /* The dots/bullets/indicators */
            .dot {
              cursor: pointer;
              height: 15px;
              width: 15px;
              margin: 0 2px;
              background-color: #bbb;
              border-radius: 50%;
              display: inline-block;
              transition: background-color 0.6s ease;
            }
            
            .active, .dot:hover {
              background-color: #717171;
            }
            
            /* Fading animation */
            .fade {
              -webkit-animation-name: fade;
              -webkit-animation-duration: 1.5s;
              animation-name: fade;
              animation-duration: 1.5s;
            }
            
            @-webkit-keyframes fade {
              from {opacity: .4} 
              to {opacity: 1}
            }
            
            @keyframes fade {
              from {opacity: .4} 
              to {opacity: 1}
            }
            
            /* On smaller screens, decrease text size */
            @media only screen and (max-width: 300px) {
              .prev, .next,.text {font-size: 11px}
            }
    </style>
           
           <script>
            const messagesList = document.querySelector('.messages-list');
              const messageForm = document.querySelector('.message-form');
              const messageInput = document.querySelector('.message-input');
        
              messageForm.addEventListener('submit', (event) => {
                event.preventDefault();
        
                const message = messageInput.value.trim();
                if (message.length === 0) {
                  return;
                }
        
                const messageItem = document.createElement('li');
                messageItem.classList.add('message', 'sent');
                messageItem.innerHTML = `
                    <div class="message-text">
                        <div class="message-sender">
                            <b>You</b>
                        </div>
                        <div class="message-content">
                            ${message}
                        </div>
                    </div>`;
                messagesList.appendChild(messageItem);
        
                messageInput.value = '';
        
                fetch('', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                  body: new URLSearchParams({
                    'csrfmiddlewaretoken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                    'message': message
                  })
                })
                  .then(response => response.json())
                  .then(data => {
                    const response = data.response;
                    const messageItem = document.createElement('li');
                    messageItem.classList.add('message', 'received');
                    messageItem.innerHTML = `
                    <div class="message-text">
                        <div class="message-sender">
                          <b>AI Chatbot</b>
                        </div>
                        <div class="message-content">
                            ${response}
                        </div>
                    </div>
                      `;
                    messagesList.appendChild(messageItem);
                  });
              });
        
        
        
          </script>

            

{% endblock %}